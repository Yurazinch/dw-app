# План к дипломному проекту #

Вариант реализации: **Laravel App**.

*Анализ проекта*

<u>Кинозал</u> - связан один со многими местами, сеансами, фильмами. 
@param $hallId, [$row => [$place => 'standart' || 'vip' || 'disabled']]

<u>Место</u> - связано с билетом на время его действия.
@param $ticketId, $sessionId, $busy (false || true).

<u>Фильм</u> - связан со многими сеансами, зрительным залом.
@param $filmId, $name, $description, $time, $country

<u>Сеанс</u> - связан с залом и фильмом, ценой. Ограничен временным отрезком. По завершению деактивируется.
@param $sessionId, $hallId, $filmId, $date, $prise, $priseVip, $startTime, $stopTime

<u>Билет</u> - связан с сеансом, местом.
@param $ticketId, $sessionId, $hall[$row][$place]

Для зрителя возможен выбор билета, остальные маршруты закрыты идентификацией.

Для админиcтратора доступны все маршруты после авторизации.

Вход на сайт - гостевой ./index.html : view (/).

Вход для администратора - ./admin/index.html : view (/admin) -> auth.

Формировать модель + контроллер + миграция Hall, Place, Film, Session, Ticket, User(Администратор).

Создание зрительского зала (auth) = созданию шаблона мест для сеансов. Заполняется в разметке (представлении), затем через $request передается и обрабатывается в таблицу в контроллере: колонки - ряды, значения в колонках - массив: № места => статус.
Конфигурация зала задается из административной паннели.

Создание фильма (auth) = статическая запись в базе данных, которая связана с сеансами.

При создании сеанса (auth) создается экземпляр зала, ссылка на фильм, дата, временной интервал, цены (обычная и vip).

При создании билета создается экземпляр сеанса, места и цена (в зависимости от статуса места).

## Создание зрительного зала

1. Заданные параметры ($rows => $places) отправляются (post) в контроллер Hall метод create. 
2. В методе формируются ячейки (/row/{row}/num/{num}), заполняются значением $status => 'buying-scheme__chair_disabled' и сохраняются в database.

## Редактирование зрительного зала

1. Через $hallId контроллер Hall отправляет (get) матрицу зала (/row/{row}/num/{num}), в представлении формируется план зала, ячейкам присваивается class='buying-scheme__chair {{$status}}'.
2. Admin устанавливает статус мест ('standart', 'vip'). Статус мест устанавливается в клиенте посредством js: функцией forEach обработчик события 'click' с проверкой статуса.
3. При сохранении обновленная информация по $hallId контроллером Hall обновляется (метод update) новыми значениями $status ('buying-scheme__chair_enabled' или 'buying-scheme__chair_vip').

## Добавление фильма

1. Данные из формы методом post отправляются в контроллер Film метод create.
2. Переменные $name, $description, $time, $country сохраняются в таблице films с уникальным $filmID.
3. Постер через фасад Storage помещается в папку storage/app/public.
4. Ссылка на файл постера $poster хранится в таблице $filmId.

## Цены 
1. Данные из формы методом post отправляются в контроллер Price метод create.
2. $priceId связывается с $hallId.

## Сетка сеансов
1. Фильмы методом get из таблицы films контроллером Film добавляются в поле фильмов.
2. *Реализацию добавления в сетку нужно продумать, пока не понятно*.

## Открыть продажи

1. Активация клиетнской части сайта. 
2. *Так же нужно будет продумать реализацию*.

## Клиентская часть 




